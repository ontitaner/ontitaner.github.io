---
layout : post
title : "缓冲输入和非缓冲输入"
category : C
duoshuo: true
date : 2015-01-02
tags : [C]
SyntaxHihglighter: true
shTheme: shThemeMidnight # shThemeDefault  shThemeDjango  shThemeEclipse  shThemeEmacs  shThemeFadeToGrey  shThemeMidnight  shThemeRDark
---

通常在程序运行过程中，会遇到这样一种现象，在输入回显之前通常需要键入完整的一行，如下所示程序输出，```[enter]```代表键入回车键。

input:Hello World![enter]

output:**Hello World!**

为什么需要键入完整的一行，这涉及到相关缓冲的概念，如下图所示。

![缓冲输入和非缓冲输入](/res/img/blog/2015/01/02/buffer.png)  

<!-- more -->

输入字符的立即回显是**非缓冲** 或 **直接输入**的一个实例，表示所键入的字符对正在等待的程序立即变为可用。延迟回显是**缓冲输入**的

实例，所键入的字符被收集在**缓冲区**的临时存储区域中，按下```回车键```可以使键入的字符对程序变为可用，如上图所示对非缓冲输入和缓冲输入

进行了比较。

>缓冲区的必要性

* **将若干个字符作为一个块传输比逐个发送字符耗费的时间少。**

* **当输入有误时，可以更正错误，最终按下回车键时，可以发送正确的输入。**

* **交互性的程序需要非缓冲输入，例如，```游戏中对命令的执行需要非缓冲输入```**

>缓冲的类型

* **完全缓冲I/O**

	缓冲区满时被清空(```内容被发送至目的地```),这种类型的缓冲通常出现在文件输入中，缓冲区的大小取决于系统，但512字节和4096字节是常见的值。
	
* **行缓冲I/O**

	遇到换行字符时被清空缓冲区，键盘输入是标准的行缓冲，因此按下回车键将清空缓冲区。





